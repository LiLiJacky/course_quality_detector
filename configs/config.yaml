# Default configuration for classroom quality pipeline
#
# Paths
excel: "data/picture/2024级学生名单.xlsx"
class_name: "英语246"
major_name: "商务英语"
roster_output: "rosters/english246.txt"

# Single-video path (used by run_pipeline quick mode)
video: "data/video/509教室-0750-0915-英语246/509A前摄像头/南通职大主楼509室047zk_20251029072500_20251029091707_1.mp4"

# Multi-camera root
video_dir: "data/video/509教室-0750-0915-英语246"
video_glob: "**/*.mp4"
sample_video_dir: "data/video_sample/509教室-0750-0915-英语246"
sample_video: "data/video_sample/509教室-0750-0915-英语246/509A前摄像头/南通职大主楼509室047zk_20251029072500_20251029091707_1.mp4"

# Ground truth for this course
ground_truth: "data/ground_truth/509教室-0750-0915-英语246.xlsx"
target_count: 30  # expected attendance; early stop when reached

picture_dir: "data/picture"
gallery_dir: "outputs/face_gallery"
track_dir: "outputs/track"

# Models
det_model: "yolo11x.pt"
det_name: "buffalo_l"
rec_name: "adaface_ir101"

# Attendance / matching
match_threshold: 0.32 # 基准阈值
frame_stride: 10      # 更密集采样以提升召回
max_frames: null      # 全量帧（每段视频全扫）
min_count: 5          # 单视频最少出现次数
min_recognized_counts: 10  # 全局计数过滤，低于此值视为误检
# 多摄像头权重与补漏策略
back_cam_keywords: ["B", "后"]          # 识别为后摄的关键字
front_cam_keywords: ["A", "前"]        # 识别为前摄的关键字
weight_back: 70                       # 后摄命中权重
weight_front: 30                      # 前摄补充分权重（仅在后摄已命中时叠加）
weight_front_only: 60                 # 仅前摄补漏权重（无后摄命中）
attend_score_threshold: 60            # 出勤分阈值
min_count_back: 5                     # 后摄最少出现次数
min_count_front: 3                    # 前摄补充最少出现次数
min_count_front_only: 8               # 前摄补漏最少出现次数
min_recognized_counts_front_only: 12  # 前摄补漏的全局计数要求
thr_front_only: 0.34                  # 前摄补漏的相似度阈值（可高于 match_threshold）
max_images: null   # set to an int to limit gallery images
max_crops: null    # only used in non-quick mode

# Modes
quick_attendance_only: true
